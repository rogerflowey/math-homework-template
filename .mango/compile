#!/usr/bin/env bash
set -euo pipefail

script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
repo_root="$(cd "$script_dir/.." && pwd)"

# Check if xelatex is available
if ! command -v xelatex &> /dev/null; then
    echo "Error: xelatex is not installed. Please install TeX Live."
    exit 1
fi

# Compile LaTeX file
if [ $# -eq 0 ]; then
    echo "Usage: mango compile <filename.tex>"
    exit 1
fi

filename="$1"
xelatex -interaction=nonstopmode -output-directory="$repo_root" "$repo_root/$filename"